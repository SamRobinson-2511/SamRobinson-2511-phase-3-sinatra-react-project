{"ast":null,"code":"var _jsxFileName = \"/home/julianne/Development/code/phase-3/SamRobinson-2511-phase-3-sinatra-react-project/records-frontend/src/Components/Review.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Review(_ref) {\n  _s();\n  let {\n    myReview,\n    handleDelete,\n    setReviews\n  } = _ref;\n  console.log(myReview);\n  const [user, setUser] = useState({});\n  const [showEdit, setShowEdit] = useState(false);\n  const [comment, setComment] = useState(myReview.comment);\n  const [rate, setRate] = useState(myReview.rating);\n  useEffect(() => {\n    fetch(`http://localhost:9292/users/${review.user_id}`).then(resp => resp.json()).then(data => setUser(data));\n  }, []);\n  function handleEdit(e) {\n    e.preventDefault();\n    fetch(`http://localhost:9292/reviews/${review.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        rating: rate,\n        comment: comment\n      })\n    }).then(res => res.json()).then(data => data);\n\n    //refreshing the reviews data\n    fetch(`http://localhost:9292/animes/${review.record_id}/reviews`).then(resp => resp.json()).then(data => setReviews(data));\n    setShowEdit(!showEdit);\n  }\n  function handleClick() {\n    handleDelete(myReview.id);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Rating:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [review.rating, \" / 10\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Comment: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: review.comment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: [\"Created by: \", user.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"button-review-delete\",\n      onClick: handleClick,\n      children: \"Delete Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"button-edit-review\",\n      onClick: handleEdit,\n      children: \"Edit Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }, this), showEdit ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEdit,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Edit Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: rate,\n          onChange: e => setRate(e.target.value),\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Record Rating\"\n          // id=\"description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: comment,\n          onChange: e => setComment(e.target.value),\n          type: \"textarea\",\n          name: \"name\",\n          placeholder: \"Comment\",\n          className: \"input-text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          name: \"submit\",\n          value: \"Submit edit\",\n          className: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(Review, \"N6IKMs5ySbU2VlupRvxD7lwL8dI=\");\n_c = Review;\nexport default Review;\nvar _c;\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["React","useState","useEffect","Review","myReview","handleDelete","setReviews","console","log","user","setUser","showEdit","setShowEdit","comment","setComment","rate","setRate","rating","fetch","review","user_id","then","resp","json","data","handleEdit","e","preventDefault","id","method","headers","body","JSON","stringify","res","record_id","handleClick","name","target","value"],"sources":["/home/julianne/Development/code/phase-3/SamRobinson-2511-phase-3-sinatra-react-project/records-frontend/src/Components/Review.js"],"sourcesContent":["import React,{useState, useEffect} from \"react\";\n\nfunction Review({myReview, handleDelete, setReviews}) {\n    console.log(myReview)\n    const [user, setUser] = useState({})\n    const[showEdit, setShowEdit] = useState(false)\n    const [comment, setComment] = useState(myReview.comment)\n    const [rate, setRate] = useState(myReview.rating)\n\n    useEffect(() => {\n      fetch(`http://localhost:9292/users/${review.user_id}`)\n      .then(resp => resp.json())\n      .then(data => setUser(data))\n      },[])\n    \n     \n    function handleEdit(e){\n      e.preventDefault()\n     \n      fetch(`http://localhost:9292/reviews/${review.id}`, {\n        method : \"PATCH\",\n        headers : {\n          \"Content-Type\" : \"application/json\"\n        },\n        body : JSON.stringify(\n          {rating: rate,\n        comment: comment}\n        )\n      })\n      .then(res => res.json())\n      .then(data => data)\n      \n      //refreshing the reviews data\n      fetch(`http://localhost:9292/animes/${review.record_id}/reviews`)\n      .then(resp => resp.json())\n      .then(data => setReviews(data))\n\n      setShowEdit(!showEdit)\n\n    }\n    function handleClick(){\n        handleDelete(myReview.id)\n    }\n  \n     \n    \n    return (\n        <div>\n          <h3>Rating:</h3> \n          <h4>{review.rating} / 10</h4>\n          <h3>Comment: </h3>\n          <p>{review.comment}</p>\n          <i>Created by: {user.name}</i>\n\n          <button id = \"button-review-delete\" onClick = {handleClick}>Delete Review</button> \n          <button id = \"button-edit-review\" onClick = {handleEdit}>Edit Review</button> \n          {showEdit ? \n          <div className=\"form\">\n        <form onSubmit={handleEdit}>\n          <h3>Edit Review</h3>\n          \n          <input\n            value={rate}\n            onChange={(e) => setRate(e.target.value)}\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Record Rating\"\n            // id=\"description\"\n          />\n                 \n          <input\n            value={comment}\n            onChange={(e) => setComment(e.target.value)}\n            type=\"textarea\"\n            name=\"name\"\n            placeholder=\"Comment\"\n            className=\"input-text\"\n          />\n          <br />\n          \n          <input\n            type=\"submit\"\n            name=\"submit\"\n            value=\"Submit edit\"\n            className=\"submit\"\n          />\n        </form>\n        </div> : <p></p>}\n\n\n          </div> \n      );\n}\n\nexport default Review"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}