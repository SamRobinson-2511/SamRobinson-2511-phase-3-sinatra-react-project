{"ast":null,"code":"var _jsxFileName = \"/home/julianne/Development/code/phase-3/SamRobinson-2511-phase-3-sinatra-react-project/records-frontend/src/Components/Collection.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport RecordCard from \"./RecordCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Collection(_ref) {\n  _s();\n  let {\n    recordsInCollection,\n    setRecordsInCollection,\n    user,\n    collectors\n  } = _ref;\n  document.body.style.backgroundImage = \"url('https://static.vecteezy.com/system/resources/previews/006/797/720/original/retro-background-groovy-background-free-vector.jpg')\";\n  document.body.style.backgroundRepeat = \"repeat\";\n  document.body.style.backgroundSize = 'auto';\n  const [userOrders, setUserOrders] = useState([]);\n  const handleDeleteFromCollectionClick = record => {\n    const filterRecordsInCollection = recordsInCollection.filter(recordInCollection => recordInCollection.id !== guitar.id);\n    setsInCart(filterGuitarsInCart);\n  };\n  const renderGuitarsInCart = guitarsInCart.map(guitar => /*#__PURE__*/_jsxDEV(GuitarCard, {\n    guitar: guitar,\n    isInCart: true,\n    handleDeleteFromCartClick: handleDeleteFromCartClick,\n    placeOrder: placeOrder\n  }, guitar.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 9\n  }, this));\n  const placeOrder = () => {\n    if (user.length > 0 && guitarsInCart.length > 0) {\n      guitarsInCart.forEach(guitar => {\n        fetch('http://localhost:9292/orders', {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            guitar_id: guitar.id,\n            customer_id: user[0].id\n          })\n        }).then(res => res.json()).then(handleCartAfterOrderPlaced);\n      });\n      alert('Order placed successfully!');\n    }\n  };\n  if (user.length > 0) {\n    useEffect(() => {\n      fetch(`http://localhost:9292/orders/${user[0].id}`).then(res => res.json()).then(userOrders => setUserOrders(userOrders));\n    }, [userOrders]);\n  }\n  const renderUserOrders = userOrders.map(order => /*#__PURE__*/_jsxDEV(OrderCard, {\n    order: order\n  }, order.order_number, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this));\n  const isValid = Boolean(guitarsInCart.length > 0 && user.length > 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"guitar-cart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-headers\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Total: $\", cartTotal]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"order-btn\",\n          onClick: placeOrder,\n          disabled: !isValid,\n          children: isValid ? \"Place order\" : \"Please log in & add guitars\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Cart Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"guitars-in-cart\",\n        children: renderGuitarsInCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Order History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-container\",\n        children: renderUserOrders\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(Collection, \"+KJ2BdZVUDJbaVeEWE/t5XWvDXk=\");\n_c = Collection;\nexport default Collection;\nvar _c;\n$RefreshReg$(_c, \"Collection\");","map":{"version":3,"names":["React","useState","useEffect","RecordCard","Collection","recordsInCollection","setRecordsInCollection","user","collectors","document","body","style","backgroundImage","backgroundRepeat","backgroundSize","userOrders","setUserOrders","handleDeleteFromCollectionClick","record","filterRecordsInCollection","filter","recordInCollection","id","guitar","setsInCart","filterGuitarsInCart","renderGuitarsInCart","guitarsInCart","map","handleDeleteFromCartClick","placeOrder","length","forEach","fetch","method","headers","JSON","stringify","guitar_id","customer_id","then","res","json","handleCartAfterOrderPlaced","alert","renderUserOrders","order","order_number","isValid","Boolean","cartTotal"],"sources":["/home/julianne/Development/code/phase-3/SamRobinson-2511-phase-3-sinatra-react-project/records-frontend/src/Components/Collection.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport RecordCard from \"./RecordCard\";\n\n\nfunction Collection({recordsInCollection, setRecordsInCollection, user, collectors}) {\n\n    document.body.style.backgroundImage = \"url('https://static.vecteezy.com/system/resources/previews/006/797/720/original/retro-background-groovy-background-free-vector.jpg')\"\n    document.body.style.backgroundRepeat = \"repeat\"\n    document.body.style.backgroundSize = 'auto'\n\n    const [userOrders, setUserOrders] = useState([])\n    \n    const handleDeleteFromCollectionClick = (record) => {\n        const filterRecordsInCollection = recordsInCollection.filter(recordInCollection => recordInCollection.id !== guitar.id)\n        setsInCart(filterGuitarsInCart)\n    }\n\n    const renderGuitarsInCart = guitarsInCart.map(guitar =>\n        <GuitarCard guitar={guitar} isInCart={true} key={guitar.id} handleDeleteFromCartClick={handleDeleteFromCartClick} placeOrder={placeOrder}\n        />)\n    \n    const placeOrder = () => {\n        if (user.length > 0 && guitarsInCart.length > 0) {\n            guitarsInCart.forEach(guitar => {\n                fetch('http://localhost:9292/orders', {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({guitar_id: guitar.id, customer_id: user[0].id})\n            })\n            .then(res => res.json())\n            .then(handleCartAfterOrderPlaced)\n        })\n            alert('Order placed successfully!');\n        }\n    }\n\n    if (user.length > 0) {\n        useEffect(() => {\n            fetch(`http://localhost:9292/orders/${user[0].id}`)\n            .then(res => res.json())\n            .then(userOrders => setUserOrders(userOrders))\n        }, [userOrders])\n    }\n\n    const renderUserOrders = userOrders.map(order => \n        <OrderCard order={order} key={order.order_number}/>)\n\n\n    const isValid = Boolean(guitarsInCart.length > 0 && user.length > 0)\n\n    return (\n        <div className=\"cart-container\">\n            <div className=\"guitar-cart-container\">\n                <div className=\"cart-headers\">\n                    <h2>Total: ${cartTotal}</h2>\n                    <button id=\"order-btn\" onClick={placeOrder} disabled={!isValid}>{isValid ? \"Place order\" : \"Please log in & add guitars\"}\n                    </button>\n                </div>\n                    <h1>Cart Items</h1>\n                <div className=\"guitars-in-cart\">\n                    {renderGuitarsInCart}\n                </div>\n            </div>\n            <div className=\"order-container\">\n                <h1>Order History</h1>\n                <div className=\"overflow-container\">\n                    {renderUserOrders}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collection;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}